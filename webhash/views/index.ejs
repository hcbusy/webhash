<!DOCTYPE html>
<html>
  <head>
    <title>WebHash</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
	 <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.3/underscore-min.js"></script>
	 <!-- <script src="http://http://cdnjs.cloudflare.com/ajax/libs/knockout/2.2.0/knockout-min.js"></script> -->
	 <script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1.js"></script>
	 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
  </head>
  <body>
    <h1>WebHash</h1>
    <p>Welcome to WebHash</p>
	    Enter the Url:<input type='text' data-bind='value: url'></input>
       <button data-bind='click: refresh'>Refresh</button> <button data-bind='click: check'>Check</button>
	 Click <a href="/about">here</a> for more detailed description.
		<p><span data-bind="text: status"></span></p><p><span data-bind="text:nextCrawlTime"</span></p>
		  <table border=1>
				<thead>
					 <tr><th>Time</th><th>Stamp</th></tr>
				</thead>
				<tbody data-bind="foreach: records">
					 <tr>
						  <td data-bind="text: timeCrawled"></td>
						  <td data-bind="">
							<table border=1><th><tr><td>name</td><td>value</td><td>delta</td></tr></th><tbody data-bind="foreach: hashes"><tr><td data-bind='text: name'></td><td data-bind='text: value'></td><td data-bind='text: delta'></td></tr></body></table>
							</td>
					 </tr>
				</tbody>
		  </table>

	<script type="application/javascript" src="javascripts/prep.js" ></script>
	<script> 
	   var vm=new WebHashModel("<%= url %>");
		ko.applyBindings(vm);
		if(vm.url() != null && vm.url().length>0){
			vm.refresh();
		}
	</script>
  </body>
</html>
